#!/bin/bash

# format='#{session_name}: #{session_windows} windows (created #{t/f/%y-%m-%d %H#:%M#:%S:window_activity})'
# tmux ls -F "${format}"
# tmux list-sessions -F '#{?session_attached,,#{session_name}}'
tmux list-sessions -F '#{session_name}' | awk 'NF' | grep -v '^scratch-' |
  sed '/^$/d' |
  fzf \
    --no-border \
    --height=100% \
    --bind 'ctrl-/:toggle-preview' \
    --exact \
    --reverse \
    --header jump-to-session \
    --preview-window=border-none \
    --preview 'tmux capture-pane -pt {} | bat --color=always -pl sh' \
    --bind 'enter:execute(tmux switch-client -t {})+accept'
